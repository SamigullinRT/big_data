# Задание на лр 4.

-Изучение zookeeper 
скачал zookeeper и установмл его указал переменные path и запустил 

скриншот---

- Создал ветки и поигрался с ними 

скриншот

Задачи:

## 1. Решите проблему обедающих философов (каждый философ - отдельный процесс в системе)

Проблема обедающих философов возникает, когда несколько философов собираются вокруг круглого стола с вилками - каждый философ должен взять две вилки, чтобы есть,
но вилки разделяются между соседними философами. Это может привести к взаимоблокировке, когда каждый философ удерживает одну вилку и ждет освобождения другой.

Когда философ голоден, он вызывает метод `eat()`. Внутри этого метода философ создает временный узел в ZooKeeper (`zk.create`) для регистрации своей голодной фазы. Затем он пытается захватить семафоры левой и правой вилки (`leftFork.acquire()` и `rightFork.acquire()`). Если оба семафора доступны, философ берет вилки и начинает есть, выполняя задержку в течение случайного времени. Затем он освобождает вилки, вызывая методы `rightFork.release()` и `leftFork.release()`.

После того, как философ заканчивает есть, он вызывает метод `think()`. Внутри этого метода философ удаляет свой временный узел из ZooKeeper (`zk.delete`) и выполняет задержку, представляющую фазу размышления.

   Скриншот

## 2. Реализуйте двуфазный коммит протокол для high-available регистра (каждый регистр - отдельный процесс в системе)

1. Создается экземпляр класса Coordinator с указанными параметрами для управления двухфазным коммитом.

2. Запускается поток координатора (coordinatorThread), который вызывает метод run() в классе Coordinator.

3. Затем создается и запускается массив потоков рабочих процессов (workers), в количестве, указанном в numWorkers.

4. Каждый поток рабочего процесса (Worker) создает связь с ZooKeeper, используя указанный хост и порт. Затем он создает путь для своего рабочего процесса, который состоит из корневого пути и идентификатора рабочего процесса (workerPath).

5. Метод run() в классе Worker выполняется в каждом рабочем процессе. Он генерирует случайное значение "commit" или "abort" для голосования.

6. Пока корневой узел не существует в ZooKeeper, процесс ждет 5 секунд. Это необходимо для того, чтобы убедиться, что координатор уже создан и готов принимать голоса.

7. После этого, рабочий процесс голосует, отправляя сообщение в консоль, указывая свой идентификатор и выбранное значение голоса.

8. Затем рабочий процесс создает временный узел в ZooKeeper с использованием своего пути и выбранного значения голоса в виде массива байтов.

9. После создания узла рабочий процесс ожидает 10 секунд (можно изменить это значение), чтобы имитировать выполнение действий, связанных с фазой коммита или отмены.

10. Наконец, рабочий процесс закрывает связь с ZooKeeper.

В итоге, координатор и рабочие процессы совместно реализуют двухфазный коммит протокол, где координатор принимает голоса рабочих процессов, а затем принимает решение о коммите или отмене на основе полученных голосов.

скриншот   
